pipeline {
	
	alphabet {
		floor f #907558; 
		wall * #A9A9A9;
		entrance  e #00FF00;
		exit  x #FF0000;
		pillar | #964B00;
	}	
	
	options {
		seed: 12;
		size: 5x5;
		tiletype: f;
	}
	
	module the_place {
		rules {
			addWalls:
			addEntrance: 
			*,
			f 
			->  
			e,
			f;
		}
		
		recipe {
			addEntrance;
		}
	}
	
	module vault {
		rules {
			addWalls:
			fffff,
			fffff,
			fffff,
			fffff,
            fffff
			->
			*****,
			*fff*,
			*fff*,
            *fff*,
			*****;
			addEntrance: 
			*,
			f 
			->  
			e,
			f;
		}
		
		recipe {
			addWalls in the_place;
			entrance = addEntrance;
		}
		on exit constraint a: Count(e) == 1;
	    constraint a: vault in the_place
		
	}
	
	global constraint a: main_entrance connected the_place
	
	
}

